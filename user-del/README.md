# 🗑️ RGAP 사용자 삭제 자동화 스크립트

이 디렉터리는 **RGAP(Remote GPU Access Platform)** 환경에서 기존 사용자를 삭제할 수 있는 셸 스크립트를 포함합니다.
스크립트는 다음을 자동화합니다:

* **Dex** (Kubeflow의 인증 시스템)에서 정적 사용자 제거
* 해당 사용자의 **Kubeflow Profile** 네임스페이스 삭제

---

## 📜 스크립트 개요

스크립트는 다음 절차를 수행합니다:

1. **필수 도구 확인 및 설치**
   * `yq`: YAML 처리 도구 (설치되어 있지 않으면 자동 설치)

2. **사용자 정보 입력**
   * 삭제할 사용자 이름과 이메일을 입력 받음

3. **Dex 설정(ConfigMap) 수정**
   * Dex 설정에서 해당 이메일의 사용자를 찾아 제거
   * YAML 유효성 검사 및 변경 사항 적용
   * Dex 디플로이먼트 재시작

4. **Kubeflow Profile 삭제**
   * 입력한 사용자 이름(소문자)을 기반으로 Profile 삭제

---

## ⚙️ 사전 요구 사항

* **Kubeflow가 설치된 Kubernetes 클러스터**
* **Dex가 `auth` 네임스페이스에서 운영 중**
* CLI 도구:
  * `kubectl`
  * `yq` (스크립트 내에서 자동 설치 가능)

---

## 🚀 사용 방법

```bash
chmod +x RGAP_user_del.sh
./RGAP_user_del.sh
```

실행 후 다음 정보를 입력해야 합니다:

* **Username**: 삭제할 사용자의 로그인 이름 (Profile 이름에도 사용됨)
* **Email**: 사용자 ID로 사용되는 이메일 주소

모든 과정이 성공적으로 완료되면:

✅ Dex 사용자 삭제
✅ Kubeflow Profile 네임스페이스 삭제

---

## 📧 문의

스크립트 사용 중 문제가 발생하면 이슈를 등록하거나 플랫폼 관리자에게 문의해 주세요.

---
